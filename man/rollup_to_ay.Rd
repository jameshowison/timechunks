% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/aggregation.R
\name{rollup_to_ay}
\alias{rollup_to_ay}
\title{Roll up a data frame to academic/fiscal year totals}
\usage{
rollup_to_ay(df, value_col, chunk_col = "semester", fn = sum, na.rm = TRUE)
}
\arguments{
\item{df}{A data frame containing at least the columns named by \code{chunk_col}
and \code{value_col}.}

\item{value_col}{Character scalar. Name of the numeric column to aggregate.}

\item{chunk_col}{Character scalar. Name of the \code{time_chunk} column used for
grouping. Defaults to \code{"semester"}.}

\item{fn}{A function used to aggregate values within each academic year.
Defaults to \code{sum}. Common alternatives: \code{mean}, \code{median}, \code{max}, \code{min}.}

\item{na.rm}{Logical. Passed to \code{fn}. If \code{TRUE}, \code{NA} values are removed
before aggregation. Default \code{TRUE}.}
}
\value{
A data frame with columns:
\itemize{
\item \code{ay}: character — academic/fiscal year string (e.g. \code{"2026-27"})
\item one column named after \code{value_col} — the aggregated value
}

Rows are sorted chronologically by the earliest period start date within
each academic year.
}
\description{
Aggregates a numeric column by academic/fiscal year, using \code{\link[=chunk_ay]{chunk_ay()}} to
group the periods. Returns a data frame with one row per unique academic year.
}
\examples{
use_chunk_preset("us_semester")

df <- data.frame(
  semester   = time_chunk(c("fa26", "sp27", "su27", "fa27", "sp28")),
  enrollment = c(8200L, 7100L, 3400L, 8500L, 7300L)
)

rollup_to_ay(df, value_col = "enrollment", chunk_col = "semester")
#   ay      enrollment
# 1 2026-27      18700
# 2 2027-28      15800

rollup_to_ay(df, value_col = "enrollment", chunk_col = "semester", fn = mean)
}
